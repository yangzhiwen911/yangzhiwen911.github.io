(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{256:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"linux-lvm-磁盘扩容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-lvm-磁盘扩容"}},[s._v("#")]),s._v(" Linux LVM 磁盘扩容")]),s._v(" "),a("h2",{attrs:{id:"lvm-的基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lvm-的基本概念"}},[s._v("#")]),s._v(" LVM 的基本概念")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("物理卷 Physical Volume (PV)：")]),s._v(" 可以在上面建立卷组的媒介，可以是硬盘分区，也可以是硬盘本身或者回环文件（loopback file）。物理卷包括一个特殊的 header，其余部分被切割为一块块物理区域（physical extents）")]),s._v(" "),a("li",[a("strong",[s._v("卷组 Volume group (VG)：")]),s._v(" 将一组物理卷收集为一个管理单元")]),s._v(" "),a("li",[a("strong",[s._v("逻辑卷 Logical volume (LV)：")]),s._v(" 虚拟分区，由物理区域（physical extents）组成")]),s._v(" "),a("li",[a("strong",[s._v("物理区域 Physical extent (PE)：")]),s._v(" 硬盘可供指派给逻辑卷的最小单位（通常为 4MB）")])]),s._v(" "),a("h2",{attrs:{id:"磁盘操作相关命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘操作相关命令"}},[s._v("#")]),s._v(" 磁盘操作相关命令")]),s._v(" "),a("ul",[a("li",[s._v("查看挂载点")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" -h\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nFilesystem                         Size  Used Avail Use% Mounted on\nudev                               955M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  955M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev\ntmpfs                              198M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".8M  196M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("% /run\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 此处为我们磁盘的挂载点")]),s._v("\n/dev/mapper/ubuntu--vg-ubuntu--lv   19G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(".0G   12G  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v("% /\ntmpfs                              986M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  986M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /dev/shm\ntmpfs                              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(".0M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /run/lock\ntmpfs                              986M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  986M   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("% /sys/fs/cgroup\n/dev/loop1                          91M   91M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% /snap/core/6350\n/dev/loop0                          89M   89M     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("% /snap/core/6964\n/dev/sda2                          976M  143M  767M  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("% /boot\n")])])]),a("ul",[a("li",[s._v("显示当前的 logical volume："),a("code",[s._v("lvdisplay")])])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvdisplay\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Logical volume ---\nLV Path                /dev/ubuntu-vg/ubuntu-lv\nLV Name                ubuntu-lv\nVG Name                ubuntu-vg\nLV UUID                e2fKkR-oZeH-WV2A-ltCi-P76v-N9yv-aUtIg1\nLV Write Access        read/write\nLV Creation host, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ubuntu-server, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-05-14 03:13:57 +0800\nLV Status              available\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# open                 1")]),s._v("\nLV Size                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nCurrent LE             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nSegments               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAllocation             inherit\nRead ahead sectors     auto\n- currently "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\nBlock device           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0\n")])])]),a("ul",[a("li",[s._v("显示当前的 volume group")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgdisplay\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Volume group ---\nVG Name               ubuntu-vg\nSystem ID             \nFormat                lvm2\nMetadata Areas        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMetadata Sequence No  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nVG Access             read/write\nVG Status             resizable\nMAX LV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur LV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOpen LV               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMax PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAct PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 这里应该是你当前的可用空间大小，待扩容完毕，这里显示的应该是最终的大小")]),s._v("\nVG Size               "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nPE Size               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nAlloc PE / Size       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nFree  PE / Size       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   \nVG UUID               dhI9ns-7lOI-pXf8-IOWL-F96N-JIYG-ZF6u82\n")])])]),a("ul",[a("li",[s._v("显示当前的 physical volume")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pvdisplay\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Physical volume ---\nPV Name               /dev/sda3\nVG Name               ubuntu-vg\nPV Size               "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB / not usable "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   \nAllocatable           "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("but full"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPE Size               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nFree PE               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nAllocated PE          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nPV UUID               TDFe2b-xsce-R8So-ldxR-ohcp-fx5J-n2JNOa\n")])])]),a("h2",{attrs:{id:"开始-lvm-扩容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始-lvm-扩容"}},[s._v("#")]),s._v(" 开始 LVM 扩容")]),s._v(" "),a("h3",{attrs:{id:"查看-fdisk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-fdisk"}},[s._v("#")]),s._v(" 查看 fdisk")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nUnits: sectors of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n\nDisk /dev/loop1: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\nUnits: sectors of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\nUnits: sectors of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nDisklabel type: gpt\nDisk identifier: F96F20D7-1F28-4B03-87CF-4FA3E81FDE29\n\nDevice       Start      End  Sectors Size Type\n/dev/sda1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\n\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\nUnits: sectors of "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nSector size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("logical/physical"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\nI/O size "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum/optimal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("512")]),s._v(" bytes\n")])])]),a("h3",{attrs:{id:"查看所有储存设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看所有储存设备"}},[s._v("#")]),s._v(" 查看所有储存设备")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nDisk /dev/loop1: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 目前只有一块磁盘 sda")]),s._v("\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n/dev/sda1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在虚拟机中挂载多一块磁盘，再操作")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nDisk /dev/loop1: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 挂载的第一块磁盘 sda")]),s._v("\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n/dev/sda1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 挂载的第二块磁盘 sdb")]),s._v("\nDisk /dev/sdb: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\n")])])]),a("h3",{attrs:{id:"创建-sdb-分区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-sdb-分区"}},[s._v("#")]),s._v(" 创建 sdb 分区")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" /dev/sdb\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nWelcome to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("util-linux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.31")]),s._v(".1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nChanges will remain "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" memory only, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" you decide to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" them.\nBe careful before using the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" command.\n\nDevice does not contain a recognized partition table.\nCreated a new DOS disklabel with disk identifier 0x0de15f1d.\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 在此处输入命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## n：新建分区")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## l: 选择逻辑分区，如果没有，则首先创建主分区（p），然后再添加逻辑分区（硬盘最多四个分区 P-P-P-P 或 P-P-P-E）")]),s._v("\nCommand "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": n\nPartition "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v("\n   p   primary "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" primary, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" extended, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   e   extended "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("container "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" logical partitions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSelect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n\nUsing default response p.\nPartition number "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-4, default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nFirst sector "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-41943039, default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \nLast sector, +sectors or +size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("K,M,G,T,P"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("-41943039, default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943039")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": \n\nCreated a new partition "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" of "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Linux'")]),s._v(" and of size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB.\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 在此处输入命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## w：写入磁盘")]),s._v("\nCommand "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": w\nThe partition table has been altered.\nCalling ioctl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to re-read partition table.\nSyncing disks.\n")])])]),a("h3",{attrs:{id:"格式化磁盘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式化磁盘"}},[s._v("#")]),s._v(" 格式化磁盘")]),s._v(" "),a("ul",[a("li",[s._v("查看分区")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fdisk")]),s._v(" -l "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/dev'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nDisk /dev/loop0: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88.4")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92733440")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("181120")]),s._v(" sectors\nDisk /dev/loop1: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("91")]),s._v(" MiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("95408128")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("186344")]),s._v(" sectors\nDisk /dev/sda: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n/dev/sda1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4095")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v("   1M BIOS boot\n/dev/sda2     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101247")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097152")]),s._v("   1G Linux filesystem\n/dev/sda3  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2101248")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940991")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39839744")]),s._v("  19G Linux filesystem\nDisk /dev/sdb: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21474836480")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943040")]),s._v(" sectors\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 此时可以看见新创建的分区 /dev/sdb1")]),s._v("\n/dev/sdb1        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41943039")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41940992")]),s._v("  20G "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("83")]),s._v(" Linux\nDisk /dev/mapper/ubuntu--vg-ubuntu--lv: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" GiB, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20396900352")]),s._v(" bytes, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39837696")]),s._v(" sectors\n")])])]),a("ul",[a("li",[s._v("格式化")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkfs")]),s._v(" -t ext4 /dev/sdb1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mke2fs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.44")]),s._v(".1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("-Mar-2018"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCreating filesystem with "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5242624")]),s._v(" 4k blocks and "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1310720")]),s._v(" inodes\nFilesystem UUID: 6f11063f-c118-4099-90fc-2b083c181b23\nSuperblock backups stored on blocks: \n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98304")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163840")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("229376")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("294912")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("819200")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("884736")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1605632")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2654208")]),s._v(", \n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096000")]),s._v("\n\nAllocating group tables: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("                            \nWriting inode tables: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("                            \nCreating journal "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32768")]),s._v(" blocks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\nWriting superblocks and filesystem accounting information: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])])]),a("h3",{attrs:{id:"创建-pv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-pv"}},[s._v("#")]),s._v(" 创建 PV")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pvcreate /dev/sdb1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nWARNING: ext4 signature detected on /dev/sdb1 at offset "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1080")]),s._v(". Wipe it? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y/n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": y\n  Wiping ext4 signature on /dev/sdb1.\n  Physical volume "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/sdb1"')]),s._v(" successfully created.\n")])])]),a("h3",{attrs:{id:"查看卷组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看卷组"}},[s._v("#")]),s._v(" 查看卷组")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("pvscan\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nPV /dev/sda3   VG ubuntu-vg       lvm2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    free"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nPV /dev/sdb1                      lvm2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.00")]),s._v(" GiB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nTotal: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39.00")]),s._v(" GiB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" no VG: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.00")]),s._v(" GiB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h3",{attrs:{id:"扩容-vg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩容-vg"}},[s._v("#")]),s._v(" 扩容 VG")]),s._v(" "),a("ul",[a("li",[s._v("查看 VG")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgdisplay\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Volume group ---\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 我们需要用到 VG Name")]),s._v("\nVG Name               ubuntu-vg\nSystem ID             \nFormat                lvm2\nMetadata Areas        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMetadata Sequence No  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nVG Access             read/write\nVG Status             resizable\nMAX LV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur LV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOpen LV               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMax PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAct PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nVG Size               "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nPE Size               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nAlloc PE / Size       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nFree  PE / Size       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   \nVG UUID               dhI9ns-7lOI-pXf8-IOWL-F96N-JIYG-ZF6u82\n")])])]),a("ul",[a("li",[s._v("扩容 VG")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgextend ubuntu-vg /dev/sdb1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nVolume group "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ubuntu-vg"')]),s._v(" successfully extended\n")])])]),a("h3",{attrs:{id:"扩容-lv"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩容-lv"}},[s._v("#")]),s._v(" 扩容 LV")]),s._v(" "),a("ul",[a("li",[s._v("查看 VG")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("vgdisplay\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Volume group ---\nVG Name               ubuntu-vg\nSystem ID             \nFormat                lvm2\nMetadata Areas        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nMetadata Sequence No  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nVG Access             read/write\nVG Status             resizable\nMAX LV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur LV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOpen LV               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nMax PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCur PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nAct PV                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nVG Size               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.99")]),s._v(" GiB\nPE Size               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.00")]),s._v(" MiB\nTotal PE              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9982")]),s._v("\nAlloc PE / Size       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 这里是可以扩容的大小")]),s._v("\nFree  PE / Size       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5119")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.00")]),s._v(" GiB\nVG UUID               dhI9ns-7lOI-pXf8-IOWL-F96N-JIYG-ZF6u82\n")])])]),a("ul",[a("li",[s._v("查看 LV")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvdisplay\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\n--- Logical volume ---\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 我们需要用到 LV Path")]),s._v("\nLV Path                /dev/ubuntu-vg/ubuntu-lv\nLV Name                ubuntu-lv\nVG Name                ubuntu-vg\nLV UUID                e2fKkR-oZeH-WV2A-ltCi-P76v-N9yv-aUtIg1\nLV Write Access        read/write\nLV Creation host, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ubuntu-server, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-05-14 03:13:57 +0800\nLV Status              available\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# open                 1")]),s._v("\nLV Size                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB\nCurrent LE             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v("\nSegments               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nAllocation             inherit\nRead ahead sectors     auto\n- currently "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\nBlock device           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0\n")])])]),a("ul",[a("li",[s._v("扩容 LV")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按固定大小追加")]),s._v("\nlvextend -L +10G /dev/ubuntu-vg/ubuntu-lv\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按百分比追加")]),s._v("\nlvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nSize of logical volume ubuntu-vg/ubuntu-lv changed from "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.00")]),s._v(" GiB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4863")]),s._v(" extents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.99")]),s._v(" GiB "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9982")]),s._v(" extents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\nLogical volume ubuntu-vg/ubuntu-lv successfully resized.\n")])])]),a("ul",[a("li",[s._v("刷新分区")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("resize2fs /dev/ubuntu-vg/ubuntu-lv\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出如下")]),s._v("\nFilesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" on-line resizing required\nold_desc_blocks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", new_desc_blocks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nThe filesystem on /dev/ubuntu-vg/ubuntu-lv is now "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10221568")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("4k"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" blocks long.\n")])])]),a("ul",[a("li",[s._v("验证是否成功")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lvdisplay\n\n--- Logical volume ---\nLV Path                /dev/ubuntu-vg/ubuntu-lv\nLV Name                ubuntu-lv\nVG Name                ubuntu-vg\nLV UUID                e2fKkR-oZeH-WV2A-ltCi-P76v-N9yv-aUtIg1\nLV Write Access        read/write\nLV Creation host, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" ubuntu-server, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-05-14 03:13:57 +0800\nLV Status              available\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# open                 1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 可以看到磁盘扩容成功了")]),s._v("\nLV Size                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38.99")]),s._v(" GiB\nCurrent LE             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9982")]),s._v("\nSegments               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nAllocation             inherit\nRead ahead sectors     auto\n- currently "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),s._v("\nBlock device           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("253")]),s._v(":0\n")])])]),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" 不要卸载扩容的磁盘，可能出现丢失数据或是系统无法启动")])])])}),[],!1,null,null,null);t.default=e.exports}}]);